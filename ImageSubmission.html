<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <title>Resize HTML5 canvas dynamically</title>
    <style>
        html, body {
            width: 100%;
            height: 100%;
            margin: 0px;
            border: 0;
            overflow: hidden; /*  Disable scrollbars */
            display: block;  /* No floating content on sides */
        }
    </style>
    <script src="http://code.jquery.com/jquery-1.11.0.min.js"></script>
</head>

<body>
<form   ref='uploadForm'
        id='uploadForm'
        encType="multipart/form-data">

    <input type="hidden" name="image" id="image"/>
    <input type='submit' value='Upload!' id="subButton" />
</form>

<label>Image File:</label><br/>
<input type="file" id="imageLoader" name="imageLoader"/>

<canvas id='myCanvas' style='position:absolute; left:0px; top:100px;'></canvas>

</body>

<script>
    let myCanvas = document.getElementById('myCanvas');
    let myContext = myCanvas.getContext('2d');
    myCanvas.width = myCanvas.height = 286;

    let resized = 0;

    // Add Event Listeners
    let subButton = document.getElementById('subButton');
        subButton.addEventListener('change', submitImage, false);
    let imageLoader = document.getElementById('imageLoader');
    imageLoader.addEventListener('change', handleImage, false);

    myCanvas.addEventListener('click', resizeCanvas, false);


    // Init the Canvas
    redraw();

    function reqListener () {
        console.log(this.responseText);
    }

    // Get the image ready to send and then send it.
    function submitImage() {
        let form = new FormData();
        let myData = myContext.toDataURL('image/png');

        form.append('image', myData);

        let myRequest = new XMLHttpRequest();

        myRequest.open();
        //When the request is loaded, print it to console.
        myRequest.addEventListener("load", reqListener);

        myRequest.setRequestHeader()
    }

    function redraw() {
        console.log('Redraw called...');
        myContext.fillStyle = '#ffffff';
        myContext.fillRect(0, 0, myCanvas.width, myCanvas.height);
        myContext.rect(0, 0, myCanvas.width, myCanvas.height);
    }

    function handleImage(e){
        let reader = new FileReader();
        reader.onload = function(event){
            let img = new Image();
            img.onload = function(){
                //htmlCanvas.width = img.width;
                //htmlCanvas.height = img.height;
                myContext.drawImage(img,0,0, myCanvas.width, myCanvas.height);
            };
            img.src = event.target.result;
        };
        reader.readAsDataURL(e.target.files[0]);
    }

    function resizeCanvas(e) {
            let data = myCanvas.toDataURL();


            myCanvas.width = myCanvas.width*2;


            let myImage = new Image();

            myImage.src = data;
            myImage.onload = function(){
                myContext.fillStyle = '#000000';
                myContext.fillRect(0, 0, myCanvas.width, myCanvas.height);
                myContext.rect(0, 0, myCanvas.width, myCanvas.height);
                myContext.drawImage(myImage, 0, 0);
            };




    }



</script>